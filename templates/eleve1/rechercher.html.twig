{# templates/inscription/rechercher.html.twig #}

{# Vérifie si l'utilisateur a le rôle Admin ou Enseignant #}
{% if app.user.roles|intersect(['ROLE_ADMIN', 'ROLE_ENSEIGNANT']) %}

    {# Formulaire de recherche #}
    <form action="{{ path('rechercher_eleve') }}" method="post">
        <input type="text" name="critere" placeholder="Entrez le nom de l'élève">
        <input type="submit" value="Rechercher">
    </form>

    {# Résultats de la recherche #}
    {% if eleves is defined %}
        <table>
            {% for classe, elevesClasse in eleves|group_by('classe') %}
                <tr>
                    <th colspan="3">{{ classe.nom }}</th>
                </tr>
                {% for eleve in elevesClasse %}
                    <tr>
                        <td>{{ eleve.nom }}</td>
                        <td>{{ eleve.prenom }}</td>
                        <td>
                            <a href="{{ path('reinscription', {id: eleve.id}) }}">Réinscrire</a>
                        </td>
                    </tr>
                {% endfor %}
            {% endfor %}
        </table>
    {% endif %}

{% else %}

    {# Message d'erreur si l'utilisateur n'a pas le rôle Admin ou Enseignant #}
    <p>Vous n'avez pas les autorisations nécessaires pour effectuer cette action.</p>

{% endif %}
